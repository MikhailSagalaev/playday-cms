# üöÄ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ñ–æ—Ä–º–æ–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

## –ü—Ä–æ–±–ª–µ–º–∞
–§–æ—Ä–º–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ù–∞–±–µ—Ä–µ–∂–Ω—ã—Ö –ß–µ–ª–Ω–æ–≤ –Ω–µ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –±–∞–∑—ã.

## –†–µ—à–µ–Ω–∏–µ (5 –º–∏–Ω—É—Ç)

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏:

```bash
# 1. –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@62.109.26.35

# 2. –û–±–Ω–æ–≤–∏ –∫–æ–¥
cd /opt/playday-cms
git pull origin main

# 3. –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ PostgreSQL
sudo -u postgres psql playday

# 4. –í—ã–ø–æ–ª–Ω–∏ –º–∏–≥—Ä–∞—Ü–∏—é (—Å–∫–æ–ø–∏—Ä—É–µ—Ç email –≤ ma_email)
\i /opt/playday-cms/migrations/003_copy_email_to_ma_email.sql

# –í—ã–≤–æ–¥:
# UPDATE 4  (–∏–ª–∏ —Å–∫–æ–ª—å–∫–æ —É —Ç–µ–±—è –∑–∞–ø–∏—Å–µ–π)
# 
# id | –Ω–∞–∑–≤–∞–Ω–∏–µ           | email                   | ma_email
# ----+--------------------+-------------------------+-------------------------
#  1 | ...                | gcity@play-day.ru       | gcity@play-day.ru
#  4 | –ù–∞–±–µ—Ä–µ–∂–Ω—ã–µ –ß–µ–ª–Ω—ã   | n-chelni@play-day.ru    | n-chelni@play-day.ru
# ...

# 5. –í—ã–π–¥–∏ –∏–∑ PostgreSQL
\q

# 6. –û–±–Ω–æ–≤–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /opt/playday-cms
cp public/playday-admin-form.js /opt/playday-cms/public/

# –ì–æ—Ç–æ–≤–æ! ‚úÖ
```

### –ü—Ä–æ–≤–µ—Ä—å —Ä–∞–±–æ—Ç—É

1. –û—Ç–∫—Ä–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ñ–æ—Ä–º—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –ù–∞–±–µ—Ä–µ–∂–Ω—ã—Ö –ß–µ–ª–Ω–æ–≤
2. –û—Ç–∫—Ä–æ–π –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
3. –û–±–Ω–æ–≤–∏—Å—å —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl+R)
4. –í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```javascript
üîç PlayDay Admin Form: –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {email: "n-chelni@play-day.ru", ...}
üöÄ PlayDay Admin Form: –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è n-chelni@play-day.ru
‚úÖ PlayDay Admin Form: –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã {Email: "n-chelni@play-day.ru", ...}  ‚Üê –¢–µ–ø–µ—Ä—å —Å–æ–≤–ø–∞–¥–∞–µ—Ç!
‚úÖ PlayDay Admin Form: –§–æ—Ä–º–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ
```

**–§–æ—Ä–º–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞–ø–æ–ª–Ω–∏—Ç—å—Å—è –¥–∞–Ω–Ω—ã–º–∏!** üéâ

---

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

1. **–°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è** `003_copy_email_to_ma_email.sql` ‚Äî –∫–æ–ø–∏—Ä—É–µ—Ç `email` –≤ `ma_email`
2. **–î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤ —Å–∫—Ä–∏–ø—Ç ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –æ –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏
3. **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª "–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º"

---

## –ï—Å–ª–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ü—Ä–æ–≤–µ—Ä—å –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞, –∫–∞–∫–æ–π email –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:

```javascript
const project_id = $('#allrecords').attr('data-tilda-project-id');
const profile = JSON.parse(localStorage.getItem(`tilda_members_profile${project_id}`));
console.log('Email –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:', profile.email, profile.ma_email, profile.login);
```

–ó–∞—Ç–µ–º –ø—Ä–æ–≤–µ—Ä—å –≤ –±–∞–∑–µ:

```sql
SELECT * FROM locations WHERE email = 'email-–∏–∑-–∫–æ–Ω—Å–æ–ª–∏' OR ma_email = 'email-–∏–∑-–∫–æ–Ω—Å–æ–ª–∏';
```

–ï—Å–ª–∏ –∑–∞–ø–∏—Å—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ ‚Äî —Å–æ–∑–¥–∞–π –µ—ë –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å —Ñ–æ—Ä–º—É —á–µ—Ä–µ–∑ Tilda —Å –≤–µ–±—Ö—É–∫–æ–º.

---

## –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–ê–∫—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç:** `docs/ACT_WORK_COMPLETED.md`
- **–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º:** `docs/TROUBLESHOOTING.md`
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Tilda:** `TILDA_INTEGRATION.md`
- **–§–æ—Ä–º–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:** `ADMIN_FORM_INTEGRATION.md`

